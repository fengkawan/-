<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ECharts China Map and Bar Chart</title>
  <!-- 引入 ECharts -->
  <script src="https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js"></script>
  <!-- 引入中国地图扩展 -->
  <script src="https://cdn.jsdelivr.net/npm/echarts/map/js/china.js"></script>
  <!-- 引入 jQuery -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  
  <style>
    #main {
      width: 100%;
      height: 600px;
    }
  </style>
</head>
<body>
  <div id="main"></div>
  <script>
    var chartDom = document.getElementById('main');
    var myChart = echarts.init(chartDom);
    
    // 中国省份数据（已包含港澳台）
    var data = [
      { name: '北京', value: 21540000 },
      { name: '天津', value: 15600000 },
      { name: '河北', value: 75560000 },
      { name: '山西', value: 37180000 },
      { name: '内蒙古', value: 24710000 },
      { name: '辽宁', value: 43750000 },
      { name: '吉林', value: 27170000 },
      { name: '黑龙江', value: 31220000 },
      { name: '上海', value: 24240000 },
      { name: '江苏', value: 84750000 },
      { name: '浙江', value: 58500000 },
      { name: '安徽', value: 63270000 },
      { name: '福建', value: 39410000 },
      { name: '江西', value: 46690000 },
      { name: '山东', value: 101530000 },
      { name: '河南', value: 96050000 },
      { name: '湖北', value: 59170000 },
      { name: '湖南', value: 69180000 },
      { name: '广东', value: 126010000 },
      { name: '广西', value: 50270000 },
      { name: '海南', value: 10080000 },
      { name: '重庆', value: 30160000 },
      { name: '四川', value: 83410000 },
      { name: '贵州', value: 36000000 },
      { name: '云南', value: 48320000 },
      { name: '西藏', value: 3440000 },
      { name: '陕西', value: 38760000 },
      { name: '甘肃', value: 26480000 },
      { name: '青海', value: 6030000 },
      { name: '宁夏', value: 7200000 },
      { name: '新疆', value: 25850000 },
      { name: '台湾', value: 23560000 },
      { name: '香港', value: 7500000 },
      { name: '澳门', value: 680000 }
    ];

    data.sort((a, b) => a.value - b.value);

    // 地图配置项
    const mapOption = {
      title: {
        text: '中国人口分布图',
        left: 'center'
      },
      visualMap: {
        left: 'right',
        min: 500000,
        max: 126010000,
        inRange: {
          color: ['#313695', '#4575b4', '#74add1', '#abd9e9', '#e0f3f8', '#ffffbf', '#fee090', '#fdae61', '#f46d43', '#d73027', '#a50026']
        },
        text: ['高', '低'],
        calculable: true
      },
      series: [{
        type: 'map',
        map: 'china',
        roam: true,
        label: {
          show: true
        },
        data: data,
        animationDurationUpdate: 1000,
        universalTransition: true
      }]
    };

    // 柱状图配置项
    const barOption = {
      title: {
        text: '人口数量柱状图',
        left: 'center'
      },
      xAxis: {
        type: 'value'
      },
      yAxis: {
        type: 'category',
        axisLabel: {
          rotate: 30
        },
        data: data.map(item => item.name)
      },
      animationDurationUpdate: 1000,
      series: [{
        type: 'bar',
        data: data.map(item => item.value),
        universalTransition: true
      }]
    };

    // 初始化显示地图
    myChart.setOption(mapOption);

    // 每2秒切换视图
    let currentOption = mapOption;
    setInterval(() => {
      currentOption = currentOption === mapOption ? barOption : mapOption;
      myChart.setOption(currentOption, true);
    }, 2000);
  </script>
</body>
</html>